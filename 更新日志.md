# NewSSP软件
## 调试步骤
1、添加调试日志系统
```c
#define DEBUG_LEVEL 1  // 0=关闭, 1=基础, 2=详细, 3=全部

void debug_log(int level, const char* format, ...) {
    if (level <= DEBUG_LEVEL) {
        va_list args;
        va_start(args, format);
        vprintf(format, args);
        va_end(args);
        printf("\n");
    }
}

// 2. 创建全局变量快照函数
void snapshot_global_variables(const char* stage) {
    debug_log(1, "=== 全局变量快照 [%s] ===", stage);
    debug_log(2, "TK=%.2f, TC=%.2f, PBar=%.2f", TK, TC, PBar);
    debug_log(2, "pH=%.3f, Alk=%.3f, TDS=%.3f", pH, Alk, TDS);
    // 添加更多关键变量...
}
```
2、建立测试函数

每完成一个计算，检查各个变量是否按照逻辑正确计算

3、创建可视化调试工具

```c
// 输出当前系统状态摘要
void print_system_summary() {
    printf("\n=== 系统状态摘要 ===\n");
    printf("温度: TK=%.2fK, TC=%.2f°C\n", TK, TC);
    printf("压力: PBar=%.2f bar\n", PBar);
    printf("pH: %.3f\n", pH);
    printf("离子强度: %.6f mol/kg\n", Ist);
    printf("TDS: %.2f mg/L\n", TDS);
    printf("碱度: %.2f mg/L as CaCO3\n", Alk);
    
    printf("\n主要离子浓度 (mol/kg):\n");
    printf("Na+: %.6f\n", zMix[iNa][0]);
    printf("Ca2+: %.6f\n", zMix[iCa][0]);
    printf("Cl-: %.6f\n", zMix[iCl][0]);
    printf("SO42-: %.6f\n", zMix[iSO4][0]);
    
    printf("\n关键热力学常数:\n");
    printf("KgwCO2: %.6e\n", KgwCO2);
    printf("K1H2CO3: %.6e\n", K1H2CO3);
    printf("KspCalcite: %.6e\n", KspCalcite);
}
```
## 数据库函数pow计算操作过多
在涉及pow操作时，看是否能够优化计算流程，能提前计算的就先计算出来，减少pow操作。